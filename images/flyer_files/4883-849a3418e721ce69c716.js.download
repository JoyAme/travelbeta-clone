"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4883],{54883:function(t,e,r){r.d(e,{K:function(){return y}});var n=r(92809),a=r(30266),c=r(68216),u=r(25997),o=r(809),s=r.n(o),i=r(9669),p=r.n(i),f=r(83757),h=r(30248),l=r(49089);function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var w=l.e.GetToken(),k=p().create({baseURL:"https://api.travelbeta.com/v1/api/",headers:{Accept:"application/json","Content-Type":"application/json","X-API-KEY":h.$h,Authorization:w?"Bearer ".concat(w):""}});k.interceptors.response.use((function(t){return t}),(function(t){401==t.response.status&&(l.e.Logout(),notify.show("Session Expired.","error"),router.push("/user/login"))}));var y=function(){function t(){(0,c.Z)(this,t)}return(0,u.Z)(t,null,[{key:"MakePostRequest",value:function(){var t=(0,a.Z)(s().mark((function t(e,r){var n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!r){t.next=14;break}return n=l.e.GetToken(),t.next=4,k.post(e,r,{headers:{Authorization:n?"Bearer ".concat(n):""}});case 4:if(200!==(a=t.sent).status||200!==a.data.httpStatusCode){t.next=9;break}return t.abrupt("return",a.data);case 9:if(200!==a.status||201!==a.data.httpStatusCode){t.next=13;break}return t.abrupt("return",a.data);case 13:throw new Error(200===a.status?a.data.description:a.statusText);case 14:throw new Error("Invalid request object!");case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"MakeGetRequest",value:function(){var t=(0,a.Z)(s().mark((function t(e,r){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!r){t.next=9;break}return t.next=3,k.get(e,{params:r,headers:{Authorization:w?"Bearer ".concat(w):""}});case 3:if(200!==(n=t.sent).status||200!==n.data.httpStatusCode){t.next=8;break}return t.abrupt("return",n.data);case 8:throw new Error(200===n.status?n.data.description:n.statusText);case 9:throw new Error("Invalid request object!");case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"login",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.post("".concat(h.VZ,"auth/login"),e);case 3:return r=t.sent,t.abrupt("return",r.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"updateProfile",value:function(){var t=(0,a.Z)(s().mark((function t(e,r){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.put("".concat(h.VZ,"auth/account/").concat(r),e,{headers:{Authorization:"Bearer ".concat(w)}});case 4:return n=t.sent,t.abrupt("return",n.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"register",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.post("".concat(h.VZ,"auth/register"),e);case 3:return r=t.sent,t.abrupt("return",r.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"resetPassword",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.post("".concat(h.VZ,"auth/account/reset-password"),e);case 3:return r=t.sent,t.abrupt("return",r.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.get("".concat(h.VZ,"auth/account/forgot-password-with-username/").concat(e.username));case 3:return r=t.sent,t.abrupt("return",r.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"laodDashboardStat",value:function(){var t=(0,a.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.get("".concat(h.VZ,"auth/account/dashboard"),{headers:{Authorization:"Bearer ".concat(w)}});case 4:return e=t.sent,t.abrupt("return",e.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"verifyAccount",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.get("".concat(h.VZ,"auth/account/verify/").concat(e.token));case 3:return r=t.sent,t.abrupt("return",r.data);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"loadCRMStaffs",value:function(){var t=(0,a.Z)(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.get("".concat(h.VZ,"auth/account/by-role/ROLE_STAFF?limit=50"),{headers:{Authorization:"Bearer ".concat(w)}});case 4:return e=t.sent,t.abrupt("return",e.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"useStaffs",value:function(t){var e,r,n,a,c=this,u=(0,f.ZP)("staffs-".concat(JSON.stringify(t)),(function(){return c.fetchStaffs(t)})),o=u.data,s=u.error,i=u.mutate;return{staffs:null===o||void 0===o||null===(e=o.data)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.accountList,pagination:null===o||void 0===o||null===(n=o.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.pagination,isLoading:!o&&!s,isError:!!s,refetch:function(){return i()},error:s}}},{key:"fetchStaffs",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r,n,a,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.page,n=e.limit,a=e.status,c=e.search,w||(w=l.e.GetToken()),t.abrupt("return",k.get("".concat(h.VZ,"auth/account/by-role/ROLE_STAFF?page=").concat(r,"&limit=").concat(n).concat(a?"&status=".concat(a):"").concat(c?"&searchWord=".concat(c):""),{headers:{Authorization:"Bearer ".concat(w)}}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"createStaff",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.post("".concat(h.VZ,"auth/register-staff"),e,{headers:{Authorization:"Bearer ".concat(w)}});case 4:return r=t.sent,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"useUsers",value:function(t){var e,r,n,a,c=this,u=(0,f.ZP)("users-".concat(JSON.stringify(t)),(function(){return c.fetchUsers(t)})),o=u.data,s=u.error,i=u.mutate;return{users:null===o||void 0===o||null===(e=o.data)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.accountList,pagination:null===o||void 0===o||null===(n=o.data)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.pagination,isLoading:!o&&!s,isError:!!s,refetch:function(){return i()},error:s}}},{key:"fetchUsers",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r,n,a,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.page,n=e.limit,a=e.status,c=e.search,w||(w=l.e.GetToken()),t.abrupt("return",k.get("".concat(h.VZ,"auth/account/by-role/ROLE_USER?page=").concat(r,"&limit=").concat(n).concat(a?"&status=".concat(a):"").concat(c?"&searchWord=".concat(c):""),{headers:{Authorization:"Bearer ".concat(w)}}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"useRoles",value:function(){var t,e=this,r=(0,f.ZP)("roles",(function(){return e.fetchRoles()})),n=r.data,a=r.error,c=r.mutate;return{roles:null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.data,isLoading:!n&&!a,isError:!!a,refetch:function(){return c()},error:a}}},{key:"fetchRoles",value:function(){var t=(0,a.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.abrupt("return",k.get("".concat(h.VZ,"auth/role"),{headers:{Authorization:"Bearer ".concat(w)}}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"listAffiliateUsers",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r,n,a,c,u=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:1,n=u.length>2&&void 0!==u[2]?u[2]:10,a=u.length>3&&void 0!==u[3]?u[3]:null,w||(w=l.e.GetToken()),t.prev=4,t.next=7,k.get("".concat(h.VZ,"auth/account/affiliates?limit=").concat(n,"&page=").concat(r).concat(void 0!=e?"&status=".concat(e):"").concat(a?"&searchWord=".concat(a):""),{headers:{Authorization:"Bearer ".concat(w)}});case 7:return c=t.sent,t.abrupt("return",c.data);case 11:throw t.prev=11,t.t0=t.catch(4),t.t0;case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}()},{key:"fetchSingleUser",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.get("".concat(h.VZ,"auth/account/").concat(e),{headers:{Authorization:"Bearer ".concat(w)}});case 4:return r=t.sent,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"useUser",value:function(t){var e=this,r=(0,f.ZP)("staffs-".concat(t),(function(){return e.fetchSingleUser(t)})),n=r.data,a=r.error,c=r.mutate;return{user:null===n||void 0===n?void 0:n.data,isLoading:!n&&!a,isError:!!a,refetch:function(){return c()},error:a}}},{key:"approveUser",value:function(){var t=(0,a.Z)(s().mark((function t(e,r){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.get("".concat(h.VZ,"auth/account/admin-verify/").concat(r),{headers:{Authorization:"Bearer ".concat(w)}});case 4:return t.sent,t.next=7,k.get("".concat(h.VZ,"auth/account/approve/").concat(e),{headers:{Authorization:"Bearer ".concat(w)}});case 7:return n=t.sent,t.abrupt("return",n.data);case 11:throw t.prev=11,t.t0=t.catch(1),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"suspendUser",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.get("".concat(h.VZ,"auth/account/toggle-disable/").concat(e),{headers:{Authorization:"Bearer ".concat(w)}});case 4:return r=t.sent,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"rejectUser",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.get("".concat(h.VZ,"auth/account/reject/").concat(e),{headers:{Authorization:"Bearer ".concat(w)}});case 4:return r=t.sent,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"setUserRole",value:function(){var t=(0,a.Z)(s().mark((function t(e,r){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.get("".concat(h.VZ,"auth/account/").concat(e,"/role/").concat(r),{headers:{Authorization:"Bearer ".concat(w)}});case 4:return n=t.sent,t.abrupt("return",n.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"removeUserRole",value:function(){var t=(0,a.Z)(s().mark((function t(e,r){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.delete("".concat(h.VZ,"auth/account/").concat(e,"/role/").concat(r),{headers:{Authorization:"Bearer ".concat(w)}});case 4:return n=t.sent,t.abrupt("return",n.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,r){return t.apply(this,arguments)}}()},{key:"UploadAvatar",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r,n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=10;break}return r={method:"POST",url:"https://api.travelbeta.com/v1/api/",headers:{"Content-Type":"application/x-www-form-urlencoded"}},(n=new FormData).append("file",e),n.append("upload_preset","public-upload"),t.next=7,p()(d(d({},r),{},{data:n}));case 7:if(200!==(a=t.sent).status){t.next=10;break}return t.abrupt("return",a.data.secure_url);case 10:throw new Error("File not found!");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"changePassword",value:function(){var t=(0,a.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w||(w=l.e.GetToken()),t.prev=1,t.next=4,k.post("".concat(h.VZ,"auth/account/change-password"),e,{headers:{Authorization:"Bearer ".concat(w)}});case 4:return r=t.sent,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}]),t}()}}]);